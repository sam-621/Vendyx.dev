/// A vendyx customer
model User {
  id        String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  createdAt DateTime  @default(now()) @map("created_at")
  updatedAt DateTime  @default(now()) @updatedAt @map("updated_at")
  deletedAt DateTime? @map("deleted_at")

  /// The user's email (unique)
  email    String @unique
  /// The user's hashed password
  password String

  /// The user's shops
  shops Shop[]

  @@map("users")
}

/// A vendyx shop
model Shop {
  id        String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  createdAt DateTime  @default(now()) @map("created_at")
  updatedAt DateTime  @default(now()) @updatedAt @map("updated_at")
  deletedAt DateTime? @map("deleted_at")

  /// The shop's name
  name String

  /// The shop's slug
  slug String @unique

  product     Product[]
  variant     Variant[]
  option      Option[]
  optionValue OptionValue[]
  asset       Asset[]

  /// The shop's owner
  owner   User   @relation(fields: [ownerId], references: [id])
  ownerId String @default(dbgenerated("(current_setting('app.current_owner_id'::text))::uuid")) @map("owner_id") @db.Uuid

  @@map("shop")
}
